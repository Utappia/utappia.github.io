<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="author" content="Salih Emin" />
        <meta name="copyright" content="Salih Emin" />

        <meta name="description" content="For some time now, I have stopped using the Linux kernel that comes bundled with the Ubuntu operating system and use a version that has a different approach on the matter of kernel schedulers. "Scheduler" is a time-resource-manager (task scheduler) who determines which process and how much it employs the ...
" />
<meta name="keywords" content="optimus kernel, benchmark, bfq, bfs, cfs, comparison, desktop, kernel, linux, performance, scheduler, story, Utappia Projects, " />
        <title>BFS vs CFS: Some personal observations on Linux Kernel performance  · Utappia
</title>
        <link href="http://cdn-images.mailchimp.com/embedcode/slim-081711.css" rel="stylesheet" type="text/css">
        <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
        <link rel="stylesheet" type="text/css" href="./theme/css/style.css" media="screen">
        <link rel="stylesheet" type="text/css" href="./theme/css/solarizedlight.css" media="screen">
        <link rel="shortcut icon" href="./theme/images/favicon.ico" type="image/x-icon" />
        <link rel="apple-touch-icon" href="./theme/images/apple-touch-icon.png" />
        <link rel="apple-touch-icon" sizes="57x57" href="./theme/images/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="./theme/images/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="./theme/images/apple-touch-icon-114x114.png" />
        <link rel="apple-touch-icon" sizes="144x144" href="./theme/images/apple-touch-icon-144x144.png" />
        <link rel="icon" href="./theme/images/apple-touch-icon-144x144.png" />
        <link href="http://utappia.org/feeds/all.rss.xml" type="application/atom+xml" rel="alternate" title="Utappia - Full Atom Feed" />
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-62475496-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
    </head>
    <body>
        <div id="content-sans-footer">
        <div class="navbar navbar-static-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="./"><span class=site-name>Utappia</span></a>
                    <div class="nav-collapse collapse">
                        <ul class="nav pull-right top-menu">
                            <li ><a href=".">Home</a></li>
                            <li ><a href="./pages/downloads.html">Downloads</a></li>
                            <li ><a href="./categories.html">Categories</a></li>
                            <li ><a href="./tags.html">Tags</a></li>
                            <li ><a href="./archives.html">Archives</a></li>
                            <li><form class="navbar-search" action="./search.html" onsubmit="return validateForm(this.elements['q'].value);"> <input type="text" class="search-query" placeholder="Search" name="q" id="tipue_search_input"></form></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="container-fluid">
            <div class="row-fluid">
                <div class="span1"></div>
                <div class="span10">
<article>
<div class="row-fluid">
    <header class="page_header span10 offset2">
    <h1><a href="./bfs-vs-cfs-some-personal-observations-on-linux-kernel-performance.html"> BFS vs CFS: Some personal observations on Linux Kernel performance  </a></h1>
    </header>
</div>

<div class="row-fluid">
        <div class="span8 offset2 article-content">

            <html><body><p>For some time now, I have stopped using the Linux kernel that comes bundled with the <a href="http://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29" title="Ubuntu (operating system)">Ubuntu operating system</a> and use a version that has a different approach on the matter of kernel <a href="http://en.wikipedia.org/wiki/Scheduling_%28computing%29" title="Scheduling (computing)">schedulers</a>.</p>
<p>"Scheduler" is a time-resource-manager (task scheduler) who determines which process and how much it employs the processor (CPU) of the computer. The official scheduler of the Linux kernel is the CFS. In the past, I made several experiments (benchmarks) to see if I could find any <strong>noticeable difference</strong> in performance of my system by optimizing the kernel and changing the scheduler. The results of the experiments did not give me any reasonable grounds for the <strong>necessity of optimizing</strong> the Linux Kernel, let alone to change the scheduler of the kernel on modern machines.</p>
<p>Nevertheless I continued to use a Linux Kernel with the BFS scheduler (see my article here : [Greek] <a href="http://cerebrux.net/linux-anavolika-preemtive-bfs-bfq-linux-kernel/">Optimizing Ubuntu Linux Kernel with BFS - BFQ</a>) and of course to optimize the kernel according the specs of my machine.</p>
<p>But yesterday, something really unexpected happened and I saw before my eyes the <strong>huge difference in performance</strong> that can give a Linux Kernel scheduler not only to an old PC but also to a modern PC with 4GB DDR3 RAM and a Intel i7 Quad Core CPU !!</p>
<h2 id="preface">Preface:</h2>
<p><em>Completely Fair Schedule (CFS):</em></p>
<p>To quote Wikipedia "The <a href="http://en.wikipedia.org/wiki/Completely_Fair_Scheduler" title="Completely Fair Scheduler">Completely Fair Scheduler</a> is the name of a task scheduler which was merged into the 2.6.23 release of the <a href="http://en.wikipedia.org/wiki/Linux_kernel" title="Linux kernel">Linux kernel</a>. It handles CPU <a href="http://en.wikipedia.org/wiki/Resource_allocation" title="Resource allocation">resource allocation</a> for executing processes, and aims to maximize overall CPU utilization while also maximizing interactive performance."</p>
<p>CFS is the standard scheduler for Android. As such it is compatible with all apps and processes run in Android</p>
<p><em>Brain FUCK Scheduler (BFS):</em></p>
<p>To quote Mr. <a href="http://en.wikipedia.org/wiki/Con_Kolivas" title="Con Kolivas">Con Kolivas</a>, the developer of BFS "BFS is the <a href="http://en.wikipedia.org/wiki/Brain_Fuck_Scheduler" title="Brain Fuck Scheduler">Brain Fuck Scheduler</a>.</p>
<p>It was designed to be forward looking only, make the most of lower spec machines, and not scale to massive hardware. ie it is a desktop orientated scheduler, with extremely low latencies for excellent interactivity by design rather than "calculated", with rigid fairness, nice priority distribution and extreme scalability within normal load levels."</p>
<p>Google looked at BFS to use as the Android scheduler but decided that it wasn't mature enough yet.</p>
<h2 id="experiment">Experiment:</h2>
<p>In this experiment I used a 1,6 GB video file (.MOV) 40 minutes long and started to render it on 720p resolution. The system had the same Uptime and same conditions. The screenshot was taken on the same percentage so that we can have a fair measurement on "estimated completion time".
I repeated this experiment for about 10 times, keeping the same conditions and it gave me the same results.</p>
<p>Now this is what I got :</p>
<p><img alt="cfs vs bfs kernel on rendering a videofile" src="/images/cfs_vs_bfs_rendering.png" style="width: 1650px; height: auto;"/></p>
<p>As you can see with the BFS scheduler the "Job" will be completed in half of the time that CFS needs. One observation that can not be seen in a picture is that with BFS the CPU had a constant and steady 98-100% CPU utilization, in contrast with CFS the CPU utilization was dropping from time to time to 25%.</p>
<blockquote>
<p>A "must read" paper for a Scientific measurements of CFS vs BFS : 
<a href="https://plus.google.com/u/0/b/106359436571697092771/106359436571697092771/posts/95Rz5kgEB9C">Scientific approach to the CFS vs BFS</a></p>
</blockquote></body></html>
<section>
<p id="comment-message">So what do you think? Did I miss something? Is any part unclear? Please leave your comments below </p>
<div class="accordion" id="accordion2">
    <div class="accordion-group">
        <div class="accordion-heading">
            <a class="accordion-toggle disqus-comment-count" data-toggle="collapse" data-parent="#accordion2"
                href="./bfs-vs-cfs-some-personal-observations-on-linux-kernel-performance.html#disqus_thread">
                Comments
            </a>
        </div>
        <div id="disqus_thread" class="accordion-body collapse">
            <div class="accordion-inner">
                <div class="comments">
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'utappia';
        var disqus_identifier = './bfs-vs-cfs-some-personal-observations-on-linux-kernel-performance.html';
    var disqus_url = './bfs-vs-cfs-some-personal-observations-on-linux-kernel-performance.html';

    (function() {
         var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
         dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
         (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>                </div>
            </div>
        </div>
    </div>
</div>
</section>
            <aside>
            <hr/>
<!--This is a comment. Added related articles section-->
    		<ul>
		<h3>You may also want to check the related articles:</h3>
        	<li><a href="./bfs-bfq-optimized-linux-kernel-packages-ready-for-install.html">BFS – BFQ optimized linux kernel packages ready for install</a></li>
        	<li><a href="./the-story-behind-optimus-kernel.html">The story behind Optimus Kernel</a></li>
        	<li><a href="./optimus-kernel-3-2-0-29-released.html">Optimus Kernel 3.2.0.29 released</a></li>
        	<li><a href="./the-story-behind-captureme.html">The story behind CaptureMe</a></li>
        	<li><a href="./optimuskernel-download.html">Download Optimus Kernel</a></li>
		</ul>
<!--This is a comment. End of related articles section-->            
	<nav>
            <ul class="articles_timeline">
 
                <li class="previous_article">« <a href="./interview-with-frostbite-media-on-iqunix-os.html" title="Previous: Interview with Frostbite Media on iQunix OS">Interview with Frostbite Media on iQunix OS</a></li>
 
                <li class="next_article"><a href="./bfs-bfq-optimized-linux-kernel-packages-ready-for-install.html" title="Next: BFS – BFQ optimized linux kernel packages ready for install">BFS – BFQ optimized linux kernel packages ready for install</a> »</li>
            </ul>
            </nav>
            </aside>
        </div>
        <section>
        <div class="span2" style="float:right;font-size:0.9em;">
 
            <h4>Published</h4>
            <time pubdate="pubdate" datetime="2012-03-22T14:55:00+02:00">Μάρ 22, 2012</time>
            <h4>Category</h4>
            <a class="category-link" href="/categories.html#Utappia-Projects-ref">Utappia Projects</a> 
            <h4>Tags</h4>
            <ul class="list-of-tags tags-in-article"> 
                <li><a href="/tags.html#benchmark-ref">benchmark
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#bfq-ref">bfq
                    <span>2</span>
</a></li>
                <li><a href="/tags.html#bfs-ref">bfs
                    <span>2</span>
</a></li>
                <li><a href="/tags.html#cfs-ref">cfs
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#comparison-ref">comparison
                    <span>3</span>
</a></li>
                <li><a href="/tags.html#desktop-ref">desktop
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#kernel-ref">kernel
                    <span>4</span>
</a></li>
                <li><a href="/tags.html#linux-ref">linux
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#optimus-kernel-ref">optimus kernel
                    <span>11</span>
</a></li>
                <li><a href="/tags.html#performance-ref">performance
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#scheduler-ref">scheduler
                    <span>1</span>
</a></li>
                <li><a href="/tags.html#story-ref">story
                    <span>5</span>
</a></li>
            </ul>

            <!-- Begin MailChimp Signup Form -->
            <div id="mc_embed_signup">
                <form action="http://utappia.us10.list-manage.com/subscribe/post?u=43b8fcc4811e0e42e65177af1&amp;id=5759f75729" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                    <h4>Get Notified</h4>
                    <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="your email" required>
                    <div class="clear"><input type="submit" value="click to subdcribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
                </form>
            </div>

            <!--End mc_embed_signup-->
        </div>
        </section>
</div>
</article>
                </div>
                <div class="span1"></div>
            </div>
        </div>
    </div>
<footer>
<div id="footer">
    <ul class="footer-content">
        <li class="elegant-license"><a rel="license" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="/images/cc4.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type">Utappia.org website</span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName"><a href="https://www.linkedin.com/in/salihemin" target="_blank">Salih Emin</a></span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"target="_blank">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</li>
        <li class="elegant-power">Powered by <a href="http://getpelican.com/" title="Pelican Home Page">Pelican</a>. Theme: <a href="http://oncrashreboot.com/pelican-elegant" title="Theme Elegant Home Page">Elegant</a> by <a href="http://oncrashreboot.com" title="Talha Mansoor Home Page">Talha Mansoor</a></li>
    </ul>
</div>
</footer>            <script src="http://code.jquery.com/jquery.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script>
            function validateForm(query)
            {
                return (query.length > 0);
            }
        </script>

<script type="text/javascript">
    var disqus_shortname = 'utappia';

    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
        <script  language="javascript" type="text/javascript">
            function uncollapse() {
                var hash_str = window.location.hash;
                if (window.location.hash.match(/^#comment-\d+$/))
                {
                    var hash_str = '#disqus_thread';
                }
                $(hash_str).collapse({
                    toggle: true
                    })
            }
        </script>

        <script type="text/javascript" language="JavaScript">
            uncollapse(); 
        </script>
    </body>
</html>